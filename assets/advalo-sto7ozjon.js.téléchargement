/*
CryptoJS v3.1.2
code.google.com/p/crypto-js
(c) 2009-2013 by Jeff Mott. All rights reserved.
code.google.com/p/crypto-js/wiki/License
*/
var CryptoJS=CryptoJS||function(s){function n(){}var e={},t=e.lib={},r=t.Base={extend:function(e){n.prototype=this;var t=new n;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),(t.init.prototype=t).$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},c=t.WordArray=r.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||i).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes;if(e=e.sigBytes,this.clamp(),r%4)for(var o=0;o<e;o++)t[r+o>>>2]|=(n[o>>>2]>>>24-o%4*8&255)<<24-(r+o)%4*8;else if(65535<n.length)for(o=0;o<e;o+=4)t[r+o>>>2]=n[o>>>2];else t.push.apply(t,n);return this.sigBytes+=e,this},clamp:function(){var e=this.words,t=this.sigBytes;e[t>>>2]&=4294967295<<32-t%4*8,e.length=s.ceil(t/4)},clone:function(){var e=r.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],n=0;n<e;n+=4)t.push(4294967296*s.random()|0);return new c.init(t,e)}}),o=e.enc={},i=o.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],r=0;r<e;r++){var o=t[r>>>2]>>>24-r%4*8&255;n.push((o>>>4).toString(16)),n.push((15&o).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new c.init(n,t/2)}},a=o.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],r=0;r<e;r++)n.push(String.fromCharCode(t[r>>>2]>>>24-r%4*8&255));return n.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new c.init(n,t)}},l=o.Utf8={stringify:function(e){try{return decodeURIComponent(escape(a.stringify(e)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(e){return a.parse(unescape(encodeURIComponent(e)))}},d=t.BufferedBlockAlgorithm=r.extend({reset:function(){this._data=new c.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=l.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(e){var t=this._data,n=t.words,r=t.sigBytes,o=this.blockSize,i=r/(4*o),i=e?s.ceil(i):s.max((0|i)-this._minBufferSize,0),r=s.min(4*(e=i*o),r);if(e){for(var a=0;a<e;a+=o)this._doProcessBlock(n,a);a=n.splice(0,e),t.sigBytes-=r}return new c.init(a,r)},clone:function(){var e=r.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});t.Hasher=d.extend({cfg:r.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){d.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(n){return function(e,t){return new n.init(t).finalize(e)}},_createHmacHelper:function(n){return function(e,t){return new u.HMAC.init(n,t).finalize(e)}}});var u=e.algo={};return e}(Math);!function(){var c=CryptoJS.lib.WordArray;CryptoJS.enc.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,r=this._map;e.clamp(),e=[];for(var o=0;o<n;o+=3)for(var i=(t[o>>>2]>>>24-o%4*8&255)<<16|(t[o+1>>>2]>>>24-(o+1)%4*8&255)<<8|t[o+2>>>2]>>>24-(o+2)%4*8&255,a=0;a<4&&o+.75*a<n;a++)e.push(r.charAt(i>>>6*(3-a)&63));if(t=r.charAt(64))for(;e.length%4;)e.push(t);return e.join("")},parse:function(e){var t=e.length,n=this._map;!(i=n.charAt(64))||-1!=(i=e.indexOf(i))&&(t=i);for(var r,o,i=[],a=0,s=0;s<t;s++)s%4&&(r=n.indexOf(e.charAt(s-1))<<s%4*2,o=n.indexOf(e.charAt(s))>>>6-s%4*2,i[a>>>2]|=(r|o)<<24-a%4*8,a++);return c.create(i,a)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(i){function _(e,t,n,r,o,i,a){return((e=e+(t&n|~t&r)+o+a)<<i|e>>>32-i)+t}function E(e,t,n,r,o,i,a){return((e=e+(t&r|n&~r)+o+a)<<i|e>>>32-i)+t}function k(e,t,n,r,o,i,a){return((e=e+(t^n^r)+o+a)<<i|e>>>32-i)+t}function C(e,t,n,r,o,i,a){return((e=e+(n^(t|~r))+o+a)<<i|e>>>32-i)+t}for(var e=CryptoJS,t=(r=e.lib).WordArray,n=r.Hasher,r=e.algo,O=[],o=0;o<64;o++)O[o]=4294967296*i.abs(i.sin(o+1))|0;r=r.MD5=n.extend({_doReset:function(){this._hash=new t.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var n=0;n<16;n++){var r=e[o=t+n];e[o]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8)}var n=this._hash.words,o=e[t+0],r=e[t+1],i=e[t+2],a=e[t+3],s=e[t+4],c=e[t+5],l=e[t+6],d=e[t+7],u=e[t+8],f=e[t+9],p=e[t+10],h=e[t+11],v=e[t+12],g=e[t+13],y=e[t+14],m=e[t+15],w=_(w=n[0],A=n[1],S=n[2],b=n[3],o,7,O[0]),b=_(b,w,A,S,r,12,O[1]),S=_(S,b,w,A,i,17,O[2]),A=_(A,S,b,w,a,22,O[3]),w=_(w,A,S,b,s,7,O[4]),b=_(b,w,A,S,c,12,O[5]),S=_(S,b,w,A,l,17,O[6]),A=_(A,S,b,w,d,22,O[7]),w=_(w,A,S,b,u,7,O[8]),b=_(b,w,A,S,f,12,O[9]),S=_(S,b,w,A,p,17,O[10]),A=_(A,S,b,w,h,22,O[11]),w=_(w,A,S,b,v,7,O[12]),b=_(b,w,A,S,g,12,O[13]),S=_(S,b,w,A,y,17,O[14]),w=E(w,A=_(A,S,b,w,m,22,O[15]),S,b,r,5,O[16]),b=E(b,w,A,S,l,9,O[17]),S=E(S,b,w,A,h,14,O[18]),A=E(A,S,b,w,o,20,O[19]),w=E(w,A,S,b,c,5,O[20]),b=E(b,w,A,S,p,9,O[21]),S=E(S,b,w,A,m,14,O[22]),A=E(A,S,b,w,s,20,O[23]),w=E(w,A,S,b,f,5,O[24]),b=E(b,w,A,S,y,9,O[25]),S=E(S,b,w,A,a,14,O[26]),A=E(A,S,b,w,u,20,O[27]),w=E(w,A,S,b,g,5,O[28]),b=E(b,w,A,S,i,9,O[29]),S=E(S,b,w,A,d,14,O[30]),w=k(w,A=E(A,S,b,w,v,20,O[31]),S,b,c,4,O[32]),b=k(b,w,A,S,u,11,O[33]),S=k(S,b,w,A,h,16,O[34]),A=k(A,S,b,w,y,23,O[35]),w=k(w,A,S,b,r,4,O[36]),b=k(b,w,A,S,s,11,O[37]),S=k(S,b,w,A,d,16,O[38]),A=k(A,S,b,w,p,23,O[39]),w=k(w,A,S,b,g,4,O[40]),b=k(b,w,A,S,o,11,O[41]),S=k(S,b,w,A,a,16,O[42]),A=k(A,S,b,w,l,23,O[43]),w=k(w,A,S,b,f,4,O[44]),b=k(b,w,A,S,v,11,O[45]),S=k(S,b,w,A,m,16,O[46]),w=C(w,A=k(A,S,b,w,i,23,O[47]),S,b,o,6,O[48]),b=C(b,w,A,S,d,10,O[49]),S=C(S,b,w,A,y,15,O[50]),A=C(A,S,b,w,c,21,O[51]),w=C(w,A,S,b,v,6,O[52]),b=C(b,w,A,S,a,10,O[53]),S=C(S,b,w,A,p,15,O[54]),A=C(A,S,b,w,r,21,O[55]),w=C(w,A,S,b,u,6,O[56]),b=C(b,w,A,S,m,10,O[57]),S=C(S,b,w,A,l,15,O[58]),A=C(A,S,b,w,g,21,O[59]),w=C(w,A,S,b,s,6,O[60]),b=C(b,w,A,S,h,10,O[61]),S=C(S,b,w,A,i,15,O[62]),A=C(A,S,b,w,f,21,O[63]);n[0]=n[0]+w|0,n[1]=n[1]+A|0,n[2]=n[2]+S|0,n[3]=n[3]+b|0},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;t[r>>>5]|=128<<24-r%32;var o=i.floor(n/4294967296);for(t[15+(64+r>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),t[14+(64+r>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),e.sigBytes=4*(t.length+1),this._process(),t=(e=this._hash).words,n=0;n<4;n++)r=t[n],t[n]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8);return e},clone:function(){var e=n.clone.call(this);return e._hash=this._hash.clone(),e}}),e.MD5=n._createHelper(r),e.HmacMD5=n._createHmacHelper(r)}(Math),function(){var e=CryptoJS,t=e.lib,n=t.Base,l=t.WordArray,r=(t=e.algo).EvpKDF=n.extend({cfg:n.extend({keySize:4,hasher:t.MD5,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n=(a=this.cfg).hasher.create(),r=l.create(),o=r.words,i=a.keySize,a=a.iterations;o.length<i;){s&&n.update(s);var s=n.update(e).finalize(t);n.reset();for(var c=1;c<a;c++)s=n.finalize(s),n.reset();r.concat(s)}return r.sigBytes=4*i,r}});e.EvpKDF=function(e,t,n){return r.create(n).compute(e,t)}}(),CryptoJS.lib.Cipher||function(){var e=(f=CryptoJS).lib,t=e.Base,a=e.WordArray,n=e.BufferedBlockAlgorithm,r=f.enc.Base64,o=f.algo.EvpKDF,i=e.Cipher=n.extend({cfg:t.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,n){this.cfg=this.cfg.extend(n),this._xformMode=e,this._key=t,this.reset()},reset:function(){n.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(r){return{encrypt:function(e,t,n){return("string"==typeof t?p:u).encrypt(r,e,t,n)},decrypt:function(e,t,n){return("string"==typeof t?p:u).decrypt(r,e,t,n)}}}});e.StreamCipher=i.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});function s(e,t,n){var r=this._iv;r?this._iv=void 0:r=this._prevBlock;for(var o=0;o<n;o++)e[t+o]^=r[o]}var c=f.mode={},l=(e.BlockCipherMode=t.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}})).extend();l.Encryptor=l.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize;s.call(this,e,t,r),n.encryptBlock(e,t),this._prevBlock=e.slice(t,t+r)}}),l.Decryptor=l.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize,o=e.slice(t,t+r);n.decryptBlock(e,t),s.call(this,e,t,r),this._prevBlock=o}}),c=c.CBC=l,l=(f.pad={}).Pkcs7={pad:function(e,t){for(var n=4*t,r=(n=n-e.sigBytes%n)<<24|n<<16|n<<8|n,o=[],i=0;i<n;i+=4)o.push(r);n=a.create(o,n),e.concat(n)},unpad:function(e){e.sigBytes-=255&e.words[e.sigBytes-1>>>2]}},e.BlockCipher=i.extend({cfg:i.cfg.extend({mode:c,padding:l}),reset:function(){i.reset.call(this);var e,t=(n=this.cfg).iv,n=n.mode;this._xformMode==this._ENC_XFORM_MODE?e=n.createEncryptor:(e=n.createDecryptor,this._minBufferSize=1),this._mode=e.call(n,this,t&&t.words)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e,t=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(t.pad(this._data,this.blockSize),e=this._process(!0)):(e=this._process(!0),t.unpad(e)),e},blockSize:4});var d=e.CipherParams=t.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),c=(f.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext;return((e=e.salt)?a.create([1398893684,1701076831]).concat(e).concat(t):t).toString(r)},parse:function(e){var t,n=(e=r.parse(e)).words;return 1398893684==n[0]&&1701076831==n[1]&&(t=a.create(n.slice(2,4)),n.splice(0,4),e.sigBytes-=16),d.create({ciphertext:e,salt:t})}},u=e.SerializableCipher=t.extend({cfg:t.extend({format:c}),encrypt:function(e,t,n,r){r=this.cfg.extend(r);var o=e.createEncryptor(n,r);return t=o.finalize(t),o=o.cfg,d.create({ciphertext:t,key:n,iv:o.iv,algorithm:e,mode:o.mode,padding:o.padding,blockSize:e.blockSize,formatter:r.format})},decrypt:function(e,t,n,r){return r=this.cfg.extend(r),t=this._parse(t,r.format),e.createDecryptor(n,r).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),f=(f.kdf={}).OpenSSL={execute:function(e,t,n,r){return r=r||a.random(8),e=o.create({keySize:t+n}).compute(e,r),n=a.create(e.words.slice(t),4*n),e.sigBytes=4*t,d.create({key:e,iv:n,salt:r})}},p=e.PasswordBasedCipher=u.extend({cfg:u.cfg.extend({kdf:f}),encrypt:function(e,t,n,r){return n=(r=this.cfg.extend(r)).kdf.execute(n,e.keySize,e.ivSize),r.iv=n.iv,(e=u.encrypt.call(this,e,t,n.key,r)).mixIn(n),e},decrypt:function(e,t,n,r){return r=this.cfg.extend(r),t=this._parse(t,r.format),n=r.kdf.execute(n,e.keySize,e.ivSize,t.salt),r.iv=n.iv,u.decrypt.call(this,e,t,n.key,r)}})}(),function(){function i(){for(var e=this._X,t=this._C,n=0;n<8;n++)a[n]=t[n];for(t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<a[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<a[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<a[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<a[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<a[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<a[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<a[6]>>>0?1:0)|0,this._b=t[7]>>>0<a[7]>>>0?1:0,n=0;n<8;n++){var r=e[n]+t[n],o=65535&r,i=r>>>16;s[n]=((o*o>>>17)+o*i>>>15)+i*i^((4294901760&r)*r|0)+((65535&r)*r|0)}e[0]=s[0]+(s[7]<<16|s[7]>>>16)+(s[6]<<16|s[6]>>>16)|0,e[1]=s[1]+(s[0]<<8|s[0]>>>24)+s[7]|0,e[2]=s[2]+(s[1]<<16|s[1]>>>16)+(s[0]<<16|s[0]>>>16)|0,e[3]=s[3]+(s[2]<<8|s[2]>>>24)+s[1]|0,e[4]=s[4]+(s[3]<<16|s[3]>>>16)+(s[2]<<16|s[2]>>>16)|0,e[5]=s[5]+(s[4]<<8|s[4]>>>24)+s[3]|0,e[6]=s[6]+(s[5]<<16|s[5]>>>16)+(s[4]<<16|s[4]>>>16)|0,e[7]=s[7]+(s[6]<<8|s[6]>>>24)+s[5]|0}var e=CryptoJS,t=e.lib.StreamCipher,r=[],a=[],s=[],n=e.algo.Rabbit=t.extend({_doReset:function(){for(var e=this._key.words,t=this.cfg.iv,n=0;n<4;n++)e[n]=16711935&(e[n]<<8|e[n]>>>24)|4278255360&(e[n]<<24|e[n]>>>8);for(var r=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],e=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]],n=this._b=0;n<4;n++)i.call(this);for(n=0;n<8;n++)e[n]^=r[n+4&7];if(t){var r=(t=16711935&((t=(n=t.words)[0])<<8|t>>>24)|4278255360&(t<<24|t>>>8))>>>16|4294901760&(n=16711935&((n=n[1])<<8|n>>>24)|4278255360&(n<<24|n>>>8)),o=n<<16|65535&t;for(e[0]^=t,e[1]^=r,e[2]^=n,e[3]^=o,e[4]^=t,e[5]^=r,e[6]^=n,e[7]^=o,n=0;n<4;n++)i.call(this)}},_doProcessBlock:function(e,t){var n=this._X;for(i.call(this),r[0]=n[0]^n[5]>>>16^n[3]<<16,r[1]=n[2]^n[7]>>>16^n[5]<<16,r[2]=n[4]^n[1]>>>16^n[7]<<16,r[3]=n[6]^n[3]>>>16^n[1]<<16,n=0;n<4;n++)r[n]=16711935&(r[n]<<8|r[n]>>>24)|4278255360&(r[n]<<24|r[n]>>>8),e[t+n]^=r[n]},blockSize:4,ivSize:2});e.Rabbit=t._createHelper(n)}(),
/** @license
 * eventsource.js
 * Available under MIT License (MIT)
 * https://github.com/Yaffle/EventSource/
 */
function(e){"use strict";var r,D=e.setTimeout,j=e.clearTimeout,R=e.XMLHttpRequest,o=e.XDomainRequest,t=e.ActiveXObject,n=e.EventSource,i=e.document,u=e.Promise,f=e.fetch,a=e.Response,p=e.TextDecoder,s=e.TextEncoder,h=e.AbortController;function c(){this.bitsNeeded=0,this.codePoint=0}"undefined"==typeof window||"readyState"in i||null!=i.body||(i.readyState="loading",window.addEventListener("load",function(e){i.readyState="complete"},!1)),null==R&&(R=function(){return new t("Microsoft.XMLHTTP")}),null==Object.create&&(Object.create=function(e){function t(){}return t.prototype=e,new t}),Date.now||(Date.now=function(){return(new Date).getTime()}),null==h&&(r=f,f=function(e,t){var n=t.signal;return r(e,{headers:t.headers,credentials:t.credentials,cache:t.cache}).then(function(e){var t=e.body.getReader();return n._reader=t,n._aborted&&n._reader.cancel(),{status:e.status,statusText:e.statusText,headers:e.headers,body:{getReader:function(){return t}}}})},h=function(){this.signal={_reader:null,_aborted:!1},this.abort=function(){null!=this.signal._reader&&this.signal._reader.cancel(),this.signal._aborted=!0}}),c.prototype.decode=function(e){function t(e,t,n){if(1===n)return 128>>t<=e&&e<<t<=2047;if(2===n)return 2048>>t<=e&&e<<t<=55295||57344>>t<=e&&e<<t<=65535;if(3===n)return 65536>>t<=e&&e<<t<=1114111;throw new Error}function n(e,t){if(6===e)return 15<t>>6?3:31<t?2:1;if(12===e)return 15<t?3:2;if(18===e)return 3;throw new Error}for(var r="",o=this.bitsNeeded,i=this.codePoint,a=0;a<e.length;a+=1){var s=e[a];0!==o&&(s<128||191<s||!t(i<<6|63&s,o-6,n(o,i)))&&(o=0,i=65533,r+=String.fromCharCode(i)),0===o?(i=0<=s&&s<=127?(o=0,s):192<=s&&s<=223?(o=6,31&s):224<=s&&s<=239?(o=12,15&s):240<=s&&s<=247?(o=18,7&s):(o=0,65533),0===o||t(i,o,n(o,i))||(o=0,i=65533)):(o-=6,i=i<<6|63&s),0===o&&(i<=65535?r+=String.fromCharCode(i):(r+=String.fromCharCode(55296+(i-65535-1>>10)),r+=String.fromCharCode(56320+(i-65535-1&1023))))}return this.bitsNeeded=o,this.codePoint=i,r};null!=p&&null!=s&&function(){try{return"test"===(new p).decode((new s).encode("test"),{stream:!0})}catch(e){console.debug("TextDecoder does not support streaming option. Using polyfill instead: "+e)}return!1}()||(p=c);var d=function(){};function I(e){this.withCredentials=!1,this.readyState=0,this.status=0,this.statusText="",this.responseText="",this.onprogress=d,this.onload=d,this.onerror=d,this.onreadystatechange=d,this._contentType="",this._xhr=e,this._sendTimeout=0,this._abort=d}function l(e){return e.replace(/[A-Z]/g,function(e){return String.fromCharCode(e.charCodeAt(0)+32)})}function v(e){for(var t=Object.create(null),n=e.split("\r\n"),r=0;r<n.length;r+=1){var o=n[r].split(": "),i=o.shift(),o=o.join(": ");t[l(i)]=o}this._map=t}function N(){}function g(e){this._headers=e}function L(){}function y(){this._listeners=Object.create(null)}function m(e){D(function(){throw e},0)}function w(e){this.type=e,this.target=void 0}function B(e,t){w.call(this,e),this.data=t.data,this.lastEventId=t.lastEventId}function M(e,t){w.call(this,e),this.status=t.status,this.statusText=t.statusText,this.headers=t.headers}function U(e,t){w.call(this,e),this.error=t.error}I.prototype.open=function(e,t){this._abort(!0);var o=this,i=this._xhr,a=1,n=0;this._abort=function(e){0!==o._sendTimeout&&(j(o._sendTimeout),o._sendTimeout=0),1!==a&&2!==a&&3!==a||(a=4,i.onload=d,i.onerror=d,i.onabort=d,i.onprogress=d,i.onreadystatechange=d,i.abort(),0!==n&&(j(n),n=0),e||(o.readyState=4,o.onabort(null),o.onreadystatechange())),a=0};function r(){if(1===a){var t=0,n="",r=void 0;if("contentType"in i)t=200,n="OK",r=i.contentType;else try{t=i.status,n=i.statusText,r=i.getResponseHeader("Content-Type")}catch(e){n="",r=void(t=0)}0!==t&&(a=2,o.readyState=2,o.status=t,o.statusText=n,o._contentType=r,o.onreadystatechange())}}function s(){if(r(),2===a||3===a){a=3;var e="";try{e=i.responseText}catch(e){}o.readyState=3,o.responseText=e,o.onprogress()}}function c(e,t){if(null!=t&&null!=t.preventDefault||(t={preventDefault:d}),s(),1===a||2===a||3===a){if(a=4,0!==n&&(j(n),n=0),o.readyState=4,"load"===e)o.onload(t);else if("error"===e)o.onerror(t);else{if("abort"!==e)throw new TypeError;o.onabort(t)}o.onreadystatechange()}}var l=function(){n=D(function(){l()},500),3===i.readyState&&s()};"onload"in i&&(i.onload=function(e){c("load",e)}),"onerror"in i&&(i.onerror=function(e){c("error",e)}),"onabort"in i&&(i.onabort=function(e){c("abort",e)}),"onprogress"in i&&(i.onprogress=s),"onreadystatechange"in i&&(i.onreadystatechange=function(e){e=e,null!=i&&(4===i.readyState?"onload"in i&&"onerror"in i&&"onabort"in i||c(""===i.responseText?"error":"load",e):3===i.readyState?"onprogress"in i||s():2===i.readyState&&r())}),!("contentType"in i)&&"ontimeout"in R.prototype||(t+=(-1===t.indexOf("?")?"?":"&")+"padding=true"),i.open(e,t,!0),"readyState"in i&&(n=D(function(){l()},0))},I.prototype.abort=function(){this._abort(!1)},I.prototype.getResponseHeader=function(e){return this._contentType},I.prototype.setRequestHeader=function(e,t){var n=this._xhr;"setRequestHeader"in n&&n.setRequestHeader(e,t)},I.prototype.getAllResponseHeaders=function(){return null!=this._xhr.getAllResponseHeaders&&this._xhr.getAllResponseHeaders()||""},I.prototype.send=function(){if("ontimeout"in R.prototype&&("sendAsBinary"in R.prototype||"mozAnon"in R.prototype)||null==i||null==i.readyState||"complete"===i.readyState){var e=this._xhr;"withCredentials"in e&&(e.withCredentials=this.withCredentials);try{e.send(void 0)}catch(e){throw e}}else{var t=this;t._sendTimeout=D(function(){t._sendTimeout=0,t.send()},4)}},v.prototype.get=function(e){return this._map[l(e)]},null!=R&&null==R.HEADERS_RECEIVED&&(R.HEADERS_RECEIVED=2),N.prototype.open=function(o,i,t,n,e,r,a){o.open("GET",e);var s,c=0;for(s in o.onprogress=function(){var e=o.responseText.slice(c);c+=e.length,t(e)},o.onerror=function(e){e.preventDefault(),n(new Error("NetworkError"))},o.onload=function(){n(null)},o.onabort=function(){n(null)},o.onreadystatechange=function(){var e,t,n,r;o.readyState===R.HEADERS_RECEIVED&&(e=o.status,t=o.statusText,n=o.getResponseHeader("Content-Type"),r=o.getAllResponseHeaders(),i(e,t,n,new v(r)))},o.withCredentials=r,a)Object.prototype.hasOwnProperty.call(a,s)&&o.setRequestHeader(s,a[s]);return o.send(),o},g.prototype.get=function(e){return this._headers.get(e)},L.prototype.open=function(e,t,o,n,r,i,a){var s=null,c=new h,l=c.signal,d=new p;return f(r,{headers:a,credentials:i?"include":"same-origin",signal:l,cache:"no-store"}).then(function(e){return s=e.body.getReader(),t(e.status,e.statusText,e.headers.get("Content-Type"),new g(e.headers)),new u(function(t,n){var r=function(){s.read().then(function(e){e.done?t(void 0):(e=d.decode(e.value,{stream:!0}),o(e),r())}).catch(function(e){n(e)})};r()})}).catch(function(e){if("AbortError"!==e.name)return e}).then(function(e){n(e)}),{abort:function(){null!=s&&s.cancel(),c.abort()}}},y.prototype.dispatchEvent=function(e){var t=(e.target=this)._listeners[e.type];if(null!=t)for(var n=t.length,r=0;r<n;r+=1){var o=t[r];try{"function"==typeof o.handleEvent?o.handleEvent(e):o.call(this,e)}catch(e){m(e)}}},y.prototype.addEventListener=function(e,t){e=String(e);var n=this._listeners,r=n[e];null==r&&(n[e]=r=[]);for(var o=!1,i=0;i<r.length;i+=1)r[i]===t&&(o=!0);o||r.push(t)},y.prototype.removeEventListener=function(e,t){e=String(e);var n=this._listeners,r=n[e];if(null!=r){for(var o=[],i=0;i<r.length;i+=1)r[i]!==t&&o.push(r[i]);0===o.length?delete n[e]:n[e]=o}},B.prototype=Object.create(w.prototype),M.prototype=Object.create(w.prototype),U.prototype=Object.create(w.prototype);var z=-1,J=0,P=1,H=2,F=-1,q=0,V=1,X=2,G=3,K=/^text\/event\-stream(;.*)?$/i,Y=function(e,t){e=null==e?t:parseInt(e,10);return W(e=e!=e?t:e)},W=function(e){return Math.min(Math.max(e,1e3),18e6)},Q=function(e,t,n){try{"function"==typeof t&&t.call(e,n)}catch(e){m(e)}};function b(e,t){y.call(this),t=t||{},this.onopen=void 0,this.onmessage=void 0,this.onerror=void 0,this.url=void 0,this.readyState=void 0,this.withCredentials=void 0,this.headers=void 0,this._close=void 0,function(c,i,e){i=String(i);function a(e,t,n,r){var o,i;b===J&&(200===e&&null!=n&&K.test(n)?(b=P,h=Date.now(),p=d,c.readyState=P,i=new M("open",{status:e,statusText:t,headers:r}),c.dispatchEvent(i),Q(c,c.onopen,i)):(o="",o=200!==e?"EventSource's response has a status "+e+" "+(t=t&&t.replace(/\s+/g," "))+" that is not 200. Aborting the connection.":"EventSource's response has a Content-Type specifying an unsupported type: "+(null==n?"-":n.replace(/\s+/g," "))+". Aborting the connection.",T(),i=new M("error",{status:e,statusText:t,headers:r}),c.dispatchEvent(i),Q(c,c.onerror,i),console.error(o)))}function s(e){if(b===P){for(var t=-1,n=0;n<e.length;n+=1)(a=e.charCodeAt(n))!=="\n".charCodeAt(0)&&a!=="\r".charCodeAt(0)||(t=n);var r=(-1!==t?E:"")+e.slice(0,t+1);E=(-1===t?E:"")+e.slice(t+1),""!==e&&(h=Date.now(),v+=e.length);for(var o=0;o<r.length;o+=1){var i,a=r.charCodeAt(o);if(k===F&&a==="\n".charCodeAt(0))k=q;else if(k===F&&(k=q),a==="\r".charCodeAt(0)||a==="\n".charCodeAt(0)){if(k!==q&&(k===V&&(O=o+1),i=r.slice(C,O-1),s=r.slice(O+(O<o&&r.charCodeAt(O)===" ".charCodeAt(0)?1:0),o),"data"===i?(S+="\n",S+=s):"id"===i?A=s:"event"===i?_=s:"retry"===i?(d=Y(s,d),p=d):"heartbeatTimeout"===i&&(u=Y(s,u),0!==w&&(j(w),w=D(function(){x()},u)))),k===q){if(""!==S){f=A;var s=new B(_=""===_?"message":_,{data:S.slice(1),lastEventId:A});if(c.dispatchEvent(s),"open"===_?Q(c,c.onopen,s):"message"===_?Q(c,c.onmessage,s):"error"===_&&Q(c,c.onerror,s),b===H)return}_=S=""}k=a==="\r".charCodeAt(0)?F:q}else k===q&&(C=o,k=V),k===V?a===":".charCodeAt(0)&&(O=o+1,k=X):k===X&&(k=G)}}}function l(e){b!==P&&b!==J||(b=z,0!==w&&(j(w),w=0),w=D(function(){x()},p),p=W(Math.min(16*d,2*p)),c.readyState=J,e=new U("error",{error:e}),c.dispatchEvent(e),Q(c,c.onerror,e))}var t=Boolean(e.withCredentials),d=W(1e3),u=Y(e.heartbeatTimeout,45e3),f="",p=d,h=!1,v=0,n=e.headers||{},e=e.Transport,g=Z&&null==e?void 0:new I(new(null!=e?e:null!=R&&"withCredentials"in R.prototype||null==o?R:o)),y=new(null!=e&&"string"!=typeof e?e:null==g?L:N),m=void 0,w=0,b=z,S="",A="",_="",E="",k=q,C=0,O=0,T=function(){b=H,null!=m&&(m.abort(),m=void 0),0!==w&&(j(w),w=0),c.readyState=H},x=function(){if(w=0,b===z){h=!1,v=0,w=D(function(){x()},u),b=J,A=f,E=_=S="",O=C=0,k=q;var e=i;"data:"!==i.slice(0,5)&&"blob:"!==i.slice(0,5)&&""!==f&&(e+=(-1===i.indexOf("?")?"?":"&")+"lastEventId="+encodeURIComponent(f));var t=c.withCredentials,n={Accept:"text/event-stream"},r=c.headers;if(null!=r)for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o]);try{m=y.open(g,a,s,l,e,t,n)}catch(e){throw T(),e}}else h||null==m?(t=Math.max((h||Date.now())+u-Date.now(),1),h=!1,w=D(function(){x()},t)):(l(new Error("No activity within "+u+" milliseconds. "+(b===J?"No response received.":v+" chars received.")+" Reconnecting.")),null!=m&&(m.abort(),m=void 0))};c.url=i,c.readyState=J,c.withCredentials=t,c.headers=n,c._close=T,x()}(this,e,t)}var Z=null!=f&&null!=a&&"body"in a.prototype;(b.prototype=Object.create(y.prototype)).CONNECTING=J,b.prototype.OPEN=P,b.prototype.CLOSED=H,b.prototype.close=function(){this._close()},b.CONNECTING=J,b.OPEN=P,b.CLOSED=H,b.prototype.withCredentials=void 0;a=n;null==R||null!=n&&"withCredentials"in n.prototype||(a=b),e.EventSourcePolyfill=b,e.NativeEventSource=n,e.EventSource=a}("undefined"!=typeof window?window:"undefined"!=typeof self?self:this),
/*!
 * Advalo - Web Analytics
 *
 * JavaScript tracking client
 */
"object"!=typeof JSON2&&"object"==typeof window.JSON&&window.JSON.stringify&&window.JSON.parse?JSON2=window.JSON:function(){var s={};
/*! JSON v3.3.2 | http://bestiejs.github.io/json3 | Copyright 2012-2014, Kit Cambridge | http://kit.mit-license.org */
!function(){var e,t,n,r,o="function"==typeof define&&define.amd,B={function:!0,object:!0},i=B[typeof s]&&s&&!s.nodeType&&s,M=B[typeof window]&&window||this,a=i&&B[typeof module]&&module&&!module.nodeType&&"object"==typeof global&&global;function U(e,s){e=e||M.Object(),s=s||M.Object();var c=e.Number||M.Number,l=e.String||M.String,t=e.Object||M.Object,d=e.Date||M.Date,n=e.SyntaxError||M.SyntaxError,S=e.TypeError||M.TypeError,r=e.Math||M.Math,e=e.JSON||M.JSON;"object"==typeof e&&e&&(s.stringify=e.stringify,s.parse=e.parse);var A,_,E,u,k,C,O,f,T,o,x,p,D,j,R,h,v,g,y,m,i,a,w,b,t=t.prototype,I=t.toString,N=new d(-0xc782b5b800cec);try{N=-109252==N.getUTCFullYear()&&0===N.getUTCMonth()&&1===N.getUTCDate()&&10==N.getUTCHours()&&37==N.getUTCMinutes()&&6==N.getUTCSeconds()&&708==N.getUTCMilliseconds()}catch(e){}function L(e){if(L[e]!==E)return L[e];var t;if("bug-string-char-index"==e)t="a"!="a"[0];else if("json"==e)t=L("json-stringify")&&L("json-parse");else{var n='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==e){var r=s.stringify,o="function"==typeof r&&N;if(o){(i=function(){return 1}).toJSON=i;try{o="0"===r(0)&&"0"===r(new c)&&'""'==r(new l)&&r(I)===E&&r(E)===E&&r()===E&&"1"===r(i)&&"[1]"==r([i])&&"[null]"==r([E])&&"null"==r(null)&&"[null,null,null]"==r([E,I,null])&&r({a:[i,!0,!1,null,"\0\b\n\f\r\t"]})==n&&"1"===r(null,i)&&"[\n 1,\n 2\n]"==r([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==r(new d(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==r(new d(864e13))&&'"-000001-01-01T00:00:00.000Z"'==r(new d(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==r(new d(-1))}catch(e){o=!1}}t=o}if("json-parse"==e){o=s.parse;if("function"==typeof o)try{if(0===o("0")&&!o(!1)){var i,a=5==(i=o(n)).a.length&&1===i.a[0];if(a){try{a=!o('"\t"')}catch(e){}if(a)try{a=1!==o("01")}catch(e){}if(a)try{a=1!==o("1.")}catch(e){}}}}catch(e){a=!1}t=a}}return L[e]=!!t}return L("json")||(u="[object Function]",k="[object Number]",C="[object String]",O="[object Array]",f=L("bug-string-char-index"),N||(T=r.floor,o=[0,31,59,90,120,151,181,212,243,273,304,334],x=function(e,t){return o[t]+365*(e-1970)+T((e-1969+(t=+(1<t)))/4)-T((e-1901+t)/100)+T((e-1601+t)/400)}),(A=t.hasOwnProperty)||(A=function(e){var n,t={__proto__:null};return t.__proto__={toString:1},A=t.toString!=I?function(e){var t=this.__proto__,e=e in(this.__proto__=null,this);return this.__proto__=t,e}:(n=t.constructor,function(e){var t=(this.constructor||n).prototype;return e in this&&!(e in t&&this[e]===t[e])}),t=null,A.call(this,e)}),_=function(e,t){var n,a,r,o=0;for(r in(n=function(){this.valueOf=0}).prototype.valueOf=0,a=new n)A.call(a,r)&&o++;return n=a=null,(_=o?2==o?function(e,t){var n,r={},o=I.call(e)==u;for(n in e)o&&"prototype"==n||A.call(r,n)||!(r[n]=1)||!A.call(e,n)||t(n)}:function(e,t){var n,r,o=I.call(e)==u;for(n in e)o&&"prototype"==n||!A.call(e,n)||(r="constructor"===n)||t(n);(r||A.call(e,n="constructor"))&&t(n)}:(a=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],function(e,t){var n,r,o=I.call(e)==u,i=!o&&"function"!=typeof e.constructor&&B[typeof e.hasOwnProperty]&&e.hasOwnProperty||A;for(n in e)o&&"prototype"==n||!i.call(e,n)||t(n);for(r=a.length;n=a[--r];i.call(e,n)&&t(n));}))(e,t)},L("json-stringify")||(p={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},D=function(e,t){return("000000"+(t||0)).slice(-e)},j=function(e){for(var t='"',n=0,r=e.length,o=!f||10<r,i=o&&(f?e.split(""):e);n<r;n++){var a=e.charCodeAt(n);switch(a){case 8:case 9:case 10:case 12:case 13:case 34:case 92:t+=p[a];break;default:if(a<32){t+="\\u00"+D(2,a.toString(16));break}t+=o?i[n]:e.charAt(n)}}return t+'"'},R=function(e,t,n,r,o,i,a){var s,c,l,d,u,f,p,h,v,g,y,m,w,b;try{s=t[e]}catch(e){}if("object"==typeof s&&s)if("[object Date]"!=(c=I.call(s))||A.call(s,"toJSON"))"function"==typeof s.toJSON&&(c!=k&&c!=C&&c!=O||A.call(s,"toJSON"))&&(s=s.toJSON(e));else if(-1/0<s&&s<1/0){if(x){for(u=T(s/864e5),l=T(u/365.2425)+1970-1;x(l+1,0)<=u;l++);for(d=T((u-x(l,0))/30.42);x(l,d+1)<=u;d++);u=1+u-x(l,d),f=T((v=(s%864e5+864e5)%864e5)/36e5)%24,p=T(v/6e4)%60,h=T(v/1e3)%60,v=v%1e3}else l=s.getUTCFullYear(),d=s.getUTCMonth(),u=s.getUTCDate(),f=s.getUTCHours(),p=s.getUTCMinutes(),h=s.getUTCSeconds(),v=s.getUTCMilliseconds();s=(l<=0||1e4<=l?(l<0?"-":"+")+D(6,l<0?-l:l):D(4,l))+"-"+D(2,d+1)+"-"+D(2,u)+"T"+D(2,f)+":"+D(2,p)+":"+D(2,h)+"."+D(3,v)+"Z"}else s=null;if(null===(s=n?n.call(t,e,s):s))return"null";if("[object Boolean]"==(c=I.call(s)))return""+s;if(c==k)return-1/0<s&&s<1/0?""+s:"null";if(c==C)return j(""+s);if("object"==typeof s){for(w=a.length;w--;)if(a[w]===s)throw S();if(a.push(s),g=[],e=i,i+=o,c==O){for(m=0,w=s.length;m<w;m++)y=R(m,s,n,r,o,i,a),g.push(y===E?"null":y);b=g.length?o?"[\n"+i+g.join(",\n"+i)+"\n"+e+"]":"["+g.join(",")+"]":"[]"}else _(r||s,function(e){var t=R(e,s,n,r,o,i,a);t!==E&&g.push(j(e)+":"+(o?" ":"")+t)}),b=g.length?o?"{\n"+i+g.join(",\n"+i)+"\n"+e+"}":"{"+g.join(",")+"}":"{}";return a.pop(),b}},s.stringify=function(e,t,n){var r,o,i;if(B[typeof t]&&t)if((i=I.call(t))==u)o=t;else if(i==O)for(var a,s={},c=0,l=t.length;c<l;a=t[c++],(i=I.call(a))!=C&&i!=k||(s[a]=1));if(n)if((i=I.call(n))==k){if(0<(n-=n%1))for(r="",10<n&&(n=10);r.length<n;r+=" ");}else i==C&&(r=n.length<=10?n:n.slice(0,10));return R("",((a={})[""]=e,a),o,s,r,"",[])}),L("json-parse")||(h=l.fromCharCode,v={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"},m=function(){throw g=y=null,n()},i=function(){for(var e,t,n,r,o,i=y,a=i.length;g<a;)switch(o=i.charCodeAt(g)){case 9:case 10:case 13:case 32:g++;break;case 123:case 125:case 91:case 93:case 58:case 44:return e=f?i.charAt(g):i[g],g++,e;case 34:for(e="@",g++;g<a;)if((o=i.charCodeAt(g))<32)m();else if(92==o)switch(o=i.charCodeAt(++g)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:e+=v[o],g++;break;case 117:for(t=++g,n=g+4;g<n;g++)48<=(o=i.charCodeAt(g))&&o<=57||97<=o&&o<=102||65<=o&&o<=70||m();e+=h("0x"+i.slice(t,g));break;default:m()}else{if(34==o)break;for(o=i.charCodeAt(g),t=g;32<=o&&92!=o&&34!=o;)o=i.charCodeAt(++g);e+=i.slice(t,g)}if(34==i.charCodeAt(g))return g++,e;m();default:if(t=g,45==o&&(r=!0,o=i.charCodeAt(++g)),48<=o&&o<=57){for(48==o&&(48<=(o=i.charCodeAt(g+1))&&o<=57)&&m(),r=!1;g<a&&(48<=(o=i.charCodeAt(g))&&o<=57);g++);if(46==i.charCodeAt(g)){for(n=++g;n<a&&(48<=(o=i.charCodeAt(n))&&o<=57);n++);n==g&&m(),g=n}if(101==(o=i.charCodeAt(g))||69==o){for(43!=(o=i.charCodeAt(++g))&&45!=o||g++,n=g;n<a&&(48<=(o=i.charCodeAt(n))&&o<=57);n++);n==g&&m(),g=n}return+i.slice(t,g)}if(r&&m(),"true"==i.slice(g,g+4))return g+=4,!0;if("false"==i.slice(g,g+5))return g+=5,!1;if("null"==i.slice(g,g+4))return g+=4,null;m()}return"$"},a=function(e){var t,n;if("$"==e&&m(),"string"==typeof e){if("@"==(f?e.charAt(0):e[0]))return e.slice(1);if("["==e){for(t=[];"]"!=(e=i());n=n||!0)!n||","==e&&"]"!=(e=i())||m(),","==e&&m(),t.push(a(e));return t}if("{"==e){for(t={};"}"!=(e=i());n=n||!0)!n||","==e&&"}"!=(e=i())||m(),","!=e&&"string"==typeof e&&"@"==(f?e.charAt(0):e[0])&&":"==i()||m(),t[e.slice(1)]=a(i());return t}m()}return e},w=function(e,t,n){n=b(e,t,n);n===E?delete e[t]:e[t]=n},b=function(e,t,n){var r,o=e[t];if("object"==typeof o&&o)if(I.call(o)==O)for(r=o.length;r--;)w(o,r,n);else _(o,function(e){w(o,e,n)});return n.call(e,t,o)},s.parse=function(e,t){var n;return g=0,y=""+e,n=a(i()),"$"!=i()&&m(),g=y=null,t&&I.call(t)==u?b(((e={})[""]=n,e),"",t):n})),s.runInContext=U,s}!a||a.global!==a&&a.window!==a&&a.self!==a||(M=a),i&&!o?U(M,i):(e=M.JSON,t=M.JSON3,n=!1,r=U(M,M.JSON3={noConflict:function(){return n||(n=!0,M.JSON=e,M.JSON3=t,e=t=null),r}}),M.JSON={parse:r.parse,stringify:r.stringify}),o&&define(function(){return r})}.call(this),JSON2=s}(),"function"!=typeof window.adv&&(window.adv=function(){var e=[];return Array.prototype.push.apply(e,arguments),(window.adv.p=window.adv.p||[]).push(e)}),"object"!=typeof Advalo&&(Advalo=function(){"use strict";var se,ce,t,le,e,de=document,ue=navigator,fe=screen,pe=window,n=!1,r=[],he=!1,ve=[],ge=pe.encodeURIComponent,ye=pe.decodeURIComponent,b=unescape,l={},d={};function me(e){return"undefined"!=typeof e}function we(e){return"object"==typeof e}function be(e){return"string"==typeof e||e instanceof String}function o(c){return c=c||ce,function(){for(var e,t,n,r,o=["search_product","search_travel"],i=0;i<arguments.length;i+=1){if(be(n=(e=arguments[i]).shift())){switch(n){case"event":n="trackEvent",1==e.length&&e.push({}),e[1].event_name=e[0],e[0]=e[1];break;case"pageview":n="trackPageView";break;case"basket":n="trackBasket";break;case"transaction":n="trackTransaction";break;case"user":n="trackUserInfos";break;case"filter":n="trackFilter";break;case"siteId":n="setSiteId";break;case"ready":n="onReady"}if(-1<o.indexOf(n)&&(t=n,n="trackEvent",r=window.advalo[t],(r=e[0]&&e[0][t]?e[0][t]:r).event_name=t,e[0]=r),-1<n.indexOf(":")){if("function"==typeof l[n])return l[n].apply(c,e);var a,s=[];for(a in d)n.match(a)&&s.push(d[a].apply(c,[n].concat(e)));return s}return c[n].apply(c,e)}return n.apply(c,e)}}}function Se(e,t,n,r){return e.addEventListener?(e.addEventListener(t,n,r),1):e.attachEvent?e.attachEvent("on"+t,n):void(e["on"+t]=n)}function i(){var e;if(!n)for(n=!0,e=0;e<r.length;e++)r[e]();return!0}function Ae(e){e=new RegExp("^([a-z]+):").exec(e);return e?e[1]:null}function _e(e){var t=new RegExp("^(?:(?:https?|ftp):)/*(?:[^@]+@)?([^:/#]+)").exec(e);return t?t[1]:e}function Ee(e,t){e=new RegExp("[\\?&#]"+t+"=([^&#]*)").exec(e);return e?ye(e[1]):""}function ke(e){for(var t in e)return 1}function Ce(e){return"number"==typeof e&&!isNaN(parseFloat(e))&&isFinite(e)}
/***********************************************************************
		 * sha1 - based on sha1 from http://phpjs.org/functions/sha1:512 (MIT /
		 * GPL v2)
		 **********************************************************************/
function Oe(e){for(var t,n,r,o,i,a,s,c,l=function(e,t){return e<<t|e>>>32-t},d=function(e){for(var t="",n=7;0<=n;n--)t+=(e>>>4*n&15).toString(16);return t},u=[],f=1732584193,p=4023233417,h=2562383102,v=271733878,g=3285377520,y=[],m=(e=b(ge(e))).length,w=0;w<m-3;w+=4)n=e.charCodeAt(w)<<24|e.charCodeAt(w+1)<<16|e.charCodeAt(w+2)<<8|e.charCodeAt(w+3),y.push(n);switch(3&m){case 0:w=2147483648;break;case 1:w=e.charCodeAt(m-1)<<24|8388608;break;case 2:w=e.charCodeAt(m-2)<<24|e.charCodeAt(m-1)<<16|32768;break;case 3:w=e.charCodeAt(m-3)<<24|e.charCodeAt(m-2)<<16|e.charCodeAt(m-1)<<8|128}for(y.push(w);14!=(15&y.length);)y.push(0);for(y.push(m>>>29),y.push(m<<3&4294967295),t=0;t<y.length;t+=16){for(w=0;w<16;w++)u[w]=y[t+w];for(w=16;w<=79;w++)u[w]=l(u[w-3]^u[w-8]^u[w-14]^u[w-16],1);for(r=f,o=p,i=h,a=v,s=g,w=0;w<=19;w++)c=l(r,5)+(o&i|~o&a)+s+u[w]+1518500249&4294967295,s=a,a=i,i=l(o,30),o=r,r=c;for(w=20;w<=39;w++)c=l(r,5)+(o^i^a)+s+u[w]+1859775393&4294967295,s=a,a=i,i=l(o,30),o=r,r=c;for(w=40;w<=59;w++)c=l(r,5)+(o&i|o&a|i&a)+s+u[w]+2400959708&4294967295,s=a,a=i,i=l(o,30),o=r,r=c;for(w=60;w<=79;w++)c=l(r,5)+(o^i^a)+s+u[w]+3395469782&4294967295,s=a,a=i,i=l(o,30),o=r,r=c;f=f+r&4294967295,p=p+o&4294967295,h=h+i&4294967295,v=v+a&4294967295,g=g+s&4294967295}return(c=d(f)+d(p)+d(h)+d(v)+d(g)).toLowerCase()}function Te(e){var t=e.length;return e="*."===(e="."===e.charAt(--t)?e.slice(0,t):e).slice(0,2)?e.slice(1):e}function a(e,t,n){var A,r,_,E,k,o,i,a,s,c,C,O,c=(s=de.domain,c=(n=n||{}).url||pe.location.href,n=n.referrer||function(){var t="";try{t=pe.top.document.referrer}catch(e){if(pe.parent)try{t=pe.parent.document.referrer}catch(e){t=""}}return t=""===t?de.referrer:t}(),"translate.googleusercontent.com"===s?(""===n&&(n=c),s=_e(c=Ee(c,"u"))):"cc.bingj.com"!==s&&"webcache.googleusercontent.com"!==s&&"74.6."!==s.slice(0,5)||(s=_e(c=de.links[0].href)),[s,c,n]),l=Te(c[0]),n=l.split("."),T=(2<n.length&&n.shift(),c[1]),x=c[2],d="GET",u=e||(/^http:/.test(document.location.href)?"http":"https")+"://lb.analytics.advalo.com/advalo.php",D=t||"",f=(de.title,[l]),j=["tpe","tpm","tpp"],R=["adv_campaign","utm_campaign","utm_source","utm_medium"],I=["adv_kwd","advalo_kwd","utm_term"],p="_adv_",N=n.join("."),L=!1,h=339552e5,v=18e5,B=15768e6,M={},g=Oe;function U(e,t,n,r,o,i){var a;L||(n&&(a=new Date).setTime(a.getTime()+n),de.cookie=e+"="+ge(t)+(n?";expires="+a.toGMTString():"")+";path="+(r||"/")+(o?";domain="+o:"")+(i?";secure":""))}function y(e){if(L)return 0;e=new RegExp("(^|;)[ ]*"+e+"=([^;]*)").exec(de.cookie);return e?ye(e[2]):0}function z(e){var t;return r?(t=new RegExp("#.*"),e.replace(t,"")):e}function J(e){for(var t,n,r=0;r<f.length;r++){if(e===(t=Te(f[r].toLowerCase())))return 1;if("."===t.slice(0,1)){if(e===t.slice(1))return 1;if(0<(n=e.length-t.length)&&e.slice(n)===t)return 1}}}function m(e){var t=new Image(1,1);t.onload=function(){},t.src=u+(u.indexOf("?")<0?"?":"&")+e}function w(e,t){var n=new Date;E||(("POST"===d?function(t){try{var e=pe.XMLHttpRequest?new pe.XMLHttpRequest:pe.ActiveXObject?new ActiveXObject("Microsoft.XMLHTTP"):null;e.open("POST",u,!0),e.onreadystatechange=function(){4===this.readyState&&200!==this.status&&m(t)},e.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),e.send(t)}catch(e){m(t)}}:m)(e),se=n.getTime()+t)}function P(e){return p+e+"."+D+"."+o}function b(){o=g((N||l)+(_||"/")).slice(0,4)}function H(e,t,n,r,o){o=e+"."+t+"."+n+"."+r+"."+o+".";window.localStorage&&le&&le.localStorage&&(le.localStorage.set(P("id"),o),window.localStorage.removeItem(P("id"))),U(P("id"),o,h,_,N)}function F(e){window.sessionStorage&&(window.sessionStorage[P("ses")]=e),U(P("ses"),e,v,_)}function q(){var e,t=new Date,n=Math.round(t.getTime()/1e3),r=y(P("id"));return(r=window.localStorage&&le&&le.localStorage?le.localStorage.get(P("id"))||window.localStorage[P("id")]:r)?(e=r.split(".")).unshift("0"):(O=!0,e=["1",i=i||g((ue.userAgent||"")+(ue.platform||"")+JSON2.stringify(M)+t.getTime()+Math.random()).slice(0,16),n,0,n,""],H(i,n,0,n,"")),e}function V(){new Date;var e,t=y(P("ses"));return(t=window.sessionStorage&&window.sessionStorage[P("ses")]?window.sessionStorage[P("ses")]:t)?(e=t.split(".")).unshift("0"):(C=!0,e=["1",a=a||g(Math.floor(10000000001*(1+Math.random()))).slice(0,16)],F(a)),e}function X(){var e=y(P("ref"));if(e.length)try{if(we(e=JSON2.parse(e)))return e}catch(e){}return["","",0,""]}function G(){var e=L;L=!1,U(P("id"),"",-86400,_,N),U(P("ses"),"",-86400,_,N),U(P("ref"),"",-86400,_,N),L=e}function S(e,t){var n,r,o,i,a=new Date,s=Math.round(a.getTime()/1e3),c=q(),l=V(),d=P("ref"),u=X(),f=A||T;if(L&&G(),E)return"";var p=O,h=c[1],v=c[2],g=c[3],y=c[4],m=c[5],w=C,b=l[1],S=de.characterSet||de.charset;if(S&&"utf-8"!==S.toLowerCase()||(S=null),r=u[0],o=u[1],c=u[2],l=u[3],w){if(g++,m=y,!k||!r.length){for(n in R)if(Object.prototype.hasOwnProperty.call(R,n)&&(r=Ee(f,R[n])).length)break;for(n in I)if(Object.prototype.hasOwnProperty.call(I,n)&&(o=Ee(f,I[n])).length)break}w=_e(x),y=l.length?_e(l):"",((l=!(!w.length||J(w)||k&&y.length&&!J(y))?x:l).length||r.length)&&(u=[r,o,c=s,z(l.slice(0,1024))],U(d,JSON2.stringify(u),B,_,N))}for(n in e+="&site_id="+D+"&rec=1&r="+String(Math.random()).slice(2,8)+"&h="+a.getHours()+"&m="+a.getMinutes()+"&s="+a.getSeconds()+"&url="+ge(z(f))+(x.length?"&urlref="+ge(z(x)):"")+"&_id="+h+"&_sid="+b+"&_idts="+v+"&_idvc="+g+"&_idn="+p+(r.length?"&_rcn="+ge(r):"")+(o.length?"&_rck="+ge(o):"")+"&_refts="+c+"&_viewts="+m+(String(l).length?"&_ref="+ge(z(l.slice(0,1024))):"")+(S?"&cs="+ge(S):""),j)Object.prototype.hasOwnProperty.call(j,n)&&(me(window.advalo.matching)&&me(window.advalo.matching[j[n]])?e+="&"+j[n]+"="+window.advalo.matching[j[n]]:me(window.advalo[j[n]])?e+="&"+j[n]+"="+window.advalo[j[n]]:((i=Ee(f,j[n])).length||(i=Ee(f,"_"+j[n])).length)&&(e+="&"+j[n]+"="+i));for(n in M)Object.prototype.hasOwnProperty.call(M,n)&&(e+="&"+n+"="+M[n]);return e+="&v="+le.version,sessionStorage&&!sessionStorage._adv_ctx&&(sessionStorage._adv_ctx=1,e+="&ctx=1"),!me(t.location)||ke(S=JSON2.parse(JSON2.stringify(t.location)))&&(S=function(e){var t=!1,n=[];try{if(ke(e))for(var r in e)we(e[r])&&delete e[r],t=!0;t&&(n=e)}catch(e){alert(e.message),n=[]}return n}(S),ke(S)&&(e+="&location="+ge(JSON2.stringify(S)))),me(t.user)&&(le.saveVisitorInfos&&le.saveVisitorInfos(t.user,!0),-1==e.indexOf("&user=")&&(!ke(t=le.sanitizeObject(t.user))||ke(t=W(t))&&(e+="&user="+ge(JSON2.stringify(t))))),le.isEmbedded()&&(e+="&emb=1"),le.isDebuging()&&(e+="&debug=1"),H(h,v,g,s,m),F(b),e}function K(e){var t,n="action=ui",r=!0;me(e.user)&&(!ke(t=le.sanitizeObject(e.user))||ke(t=W(t))&&(n+="&user="+ge(JSON2.stringify(t)),r=!0)),r&&(le.fire&&le.fire("logUserInfos",e.user),w(n=S(n,e),500))}function Y(e){var t,n="action=ev",r=!1;me(e)&&(!ke(e=le.sanitizeObject(e))||ke(t=re(e))&&(n+="&event="+ge(JSON2.stringify(t)),r=!0)),r&&(le.fire&&le.fire("logEvent",e),w(n=S(n,window.advalo),500))}function W(e){var t=[],n={};try{if(we(e))for(var r in le.Datalayer&&"function"==typeof le.Datalayer.get&&(n=le.Datalayer.get(),n=(n=le.sanitizeObject(n)).user||{}),e)we(e[r])?n[r]&&JSON2.stringify(n[r])==JSON2.stringify(e[r])&&delete e[r]:(n[r]&&n[r]==e[r]&&delete e[r],"user_id"===r&&""==e[r]&&delete e[r]);ke(e)&&(t=e)}catch(e){t=[]}return t}function Q(e){var t=!1,n=[];try{if(ke(e))for(var r in e)we(e[r]),t=!0;t&&(n=e)}catch(e){alert(e.message),n=[]}return n}function Z(e){var t,n=!1,r=[];try{if(ke(e)){for(var o in e)if(we(e[o]))"product"===o&&(e[o]=Q(e[o]));else switch(o){case"quantity":(!me(e[o])||("number"!=typeof(t=e[o])||t%1!=0)||0<!e[o])&&(e[o]=1);break;case"subtotal":case"total_discount":me(e[o])&&!Ce(e[o])&&(e[o]=0)}n=!0}n&&(r=e)}catch(e){r=[]}return r}function $(e){var t=!1,n=[];try{if(ke(e)){for(var r in e)we(e[r]);t=!0}t&&(n=e)}catch(e){alert(e.message),n=[]}return n}function ee(e){var t=!1,n=[];try{if(ke(e)){for(var r in e){if(we(e[r]))switch(r){case"line_items":case"items":var o,i=e[r];for(o in i)i[o]=Z(i[o]);e.items=i,"line_items"==r&&delete e[r]}else r;t=!0}t&&(n=e)}}catch(e){alert(e.message),n=[]}return n}function te(e){var t=!1,n=[];try{if(ke(e)){for(var r in e){if(we(e[r]))switch(r){case"line_items":case"items":var o,i=e[r];for(o in i)i[o]=Z(i[o]);e.line_items=i;break;case"delivery":case"billing":e[r]=$(e[r])}else r;t=!0}t&&(n=e)}}catch(e){alert(e.message),n=[]}return n}function ne(e){var t=!1,n=[];try{if(ke(e)){for(var r in e)we(e[r])&&(e[r]=function(e){var t=!1,n=[];try{if(ke(e)){for(var r in e)we(e[r]);t=!0}t&&(n=e)}catch(e){alert(e.message),n=[]}return n}(e[r]));t=!0}t&&(n=e)}catch(e){alert(e.message),n=[]}return n}function re(e){var t=!1,n={};try{if(ke(e))for(var r in e)if(we(e[r]))r;else switch("boolean"==typeof e[r]&&(e[r]=!0===e[r]?1:0),r){case"name":case"event_name":t=!0}t&&(n=e).name&&void 0===n.event_name&&(n.event_name=n.name,delete n.name)}catch(e){alert(e.message),n={}}return n}function oe(e,t){return""!==e?e+t.charAt(0).toUpperCase()+t.slice(1):t}function ie(t){var e,n,r,o=["","webkit","ms","moz"];for(1,n=0;n<o.length;n++)if(r=o[n],Object.prototype.hasOwnProperty.call(de,oe(r,"hidden"))){"prerender"===de[oe(r,"visibilityState")]&&(e=!0);break}e?Se(de,r+"visibilitychange",function e(){de.removeEventListener(r+"visibilitychange",e,!1),ae(t)}):ae(t)}function ae(e){"function"==typeof e&&(ve.push(e),he&&e.apply(this))}return J(_e(x))&&(x=""),function(){var e,t,n={pdf:"application/pdf",qt:"video/quicktime",realp:"audio/x-pn-realaudio-plugin",wma:"application/x-mplayer2",dir:"application/x-director",fla:"application/x-shockwave-flash",java:"application/x-java-vm",gears:"application/x-googlegears",ag:"application/x-silverlight"},r=new RegExp("Mac OS X.*Safari/").test(ue.userAgent)&&pe.devicePixelRatio||1;if(!new RegExp("MSIE").test(ue.userAgent)){if(ue.mimeTypes&&ue.mimeTypes.length)for(e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t=ue.mimeTypes[n[e]],M[e]=t&&t.enabledPlugin?"1":"0");"unknown"!=typeof navigator.javaEnabled&&me(ue.javaEnabled)&&ue.javaEnabled()&&(M.java="1"),"function"==typeof pe.GearsFactory&&(M.gears="1"),M.cookie=function(){if(L)return"0";if(me(ue.cookieEnabled))return ue.cookieEnabled?"1":"0";var e=P("testcookie");return U(e,"1"),"1"===y(e)?"1":"0"}()}M.res=fe.width*r+"x"+fe.height*r}(),b(),{getSiteId:function(){return D},getVisitorId:function(){return q()[1]},getVisitId:function(){return V()[1]},getVisitorInfo:q,getAttributionInfo:X,getAttributionCampaignName:function(){return X()[0]},getAttributionCampaignKeyword:function(){return X()[1]},getAttributionReferrerTimestamp:function(){return X()[2]},getAttributionReferrerUrl:function(){return X()[3]},setTrackerUrl:function(e){u=e},setSiteId:function(e){le.getSetting("forceSiteId")&&(e=le.getSetting("siteId")),void 0!==(D=e)&&function(e){var n;he||(n=this,(e=e||ce).ensureVisitorId().then(function(){if(he=!0,ve.length)for(var e=0,t=ve.length;e<t;e++)try{ve[e].apply(n,arguments)}catch(e){}}))}(this)},setDomains:function(e){(f=be(e)?[e]:e).push(l)},setRequestMethod:function(e){d=e||"GET"},setReferrerUrl:function(e){x=e},setCustomUrl:function(e){var t,n;t=T,A=Ae(n=e)?n:"/"===n.slice(0,1)?Ae(t)+"://"+_e(t)+n:(t=(e=(t=0<=(e=(t=z(t)).indexOf("?"))?t.slice(0,e):t).lastIndexOf("/"))!==t.length-1?t.slice(0,e+1):t)+n},setDocumentTitle:function(e){0},setAPIUrl:function(e){0},setCampaignNameKey:function(e){R=be(e)?[e]:e},setCampaignKeywordKey:function(e){I=be(e)?[e]:e},discardHashTag:function(e){r=e},setCookieNamePrefix:function(e){p=e},setCookieDomain:function(e){N=Te(e),b()},setCookiePath:function(e){_=e,b()},setVisitorCookieTimeout:function(e){h=1e3*e},setSessionCookieTimeout:function(e){v=1e3*e},setReferralCookieTimeout:function(e){B=1e3*e},setConversionAttributionFirstReferrer:function(e){k=e},setUserSize:function(t){ie(function(){setTimeout(function(){var e=(window.advalo=window.advalo||{},window.advalo);e.user=e.user||{},e.user.size&&e.user.size==t||(e.user.size=t,le.saveVisitorInfos({size:t}),K(e))},0)})},disableCookies:function(){L=!0,M.cookie="0"},deleteCookies:function(){G()},setDoNotTrack:function(e){var t=ue.doNotTrack||ue.msDoNotTrack;(E=e&&("yes"===t||"1"===t))&&this.disableCookies()},killFrame:function(){pe.location!==pe.top.location&&(pe.top.location=pe.location)},trackPageView:function(e){ie(function(){!function(e){var t,n,r="action=pv";me(e.page)||(e.page={type:"unknown",name:"unknown"}),me(e.product)&&(!ke(t=le.sanitizeObject(e.product))||ke(n=Q(t))&&(e.page.product=e.page.product||n)),me(e.vehicle)&&(!ke(n=le.sanitizeObject(e.vehicle))||ke(c=Q(n))&&(e.page.vehicle=e.page.vehicle||c));var o,i,a,s,c=le.sanitizeObject(e.page);ke(c)&&(c.product&&(c.name=c.name||c.product.name,"unknown"==c.name&&""!=c.product.name&&(c.name=c.product.name)),ke(o=c)&&(r+="&page="+ge(JSON2.stringify(o)))),me(e.basket)&&(!ke(o=le.sanitizeObject(e.basket))||ke(i=ee(o))&&(r+="&basket="+ge(JSON2.stringify(i)))),me(e.transaction)&&(!ke(i=le.sanitizeObject(e.transaction))||ke(i=te(i))&&(r+="&transaction="+ge(JSON2.stringify(i)))),me(e.events)&&(!ke(a=le.sanitizeObject(e.events))||ke(s=ne(a))&&(r+="&events="+ge(JSON2.stringify(s)))),me(e.search_product)&&(e.event=e.search_product,e.event.event_name="search_product"),me(e.event)&&(!ke(a=le.sanitizeObject(e.event))||ke(s=re(a))&&(r+="&event="+ge(JSON2.stringify(s)),le.fire&&le.fire("logEvent",a))),le.fire&&le.fire("logPageView",e.page),w(r=S(r,e),500)}(e||window.advalo||{})})},trackUserInfos:function(e){ie(function(){K(e||window.advalo||{})})},trackBasket:function(o){ie(function(){var e,t,n,r;e=o||window.advalo||{},r=!(n="action=bk"),me(e.basket)&&(!ke(t=le.sanitizeObject(e.basket))||ke(t=ee(t))&&(n+="&basket="+ge(JSON2.stringify(t)),r=!0)),r&&(le.fire&&le.fire("logBasket",e.basket),w(n=S(n,e),500))})},trackTransaction:function(o){ie(function(){var e,t,n,r;e=o||window.advalo||{},r=!(n="action=tr"),me(e.transaction)&&(!ke(t=le.sanitizeObject(e.transaction))||ke(t=te(t))&&(n+="&transaction="+ge(JSON2.stringify(t)),r=!0)),r&&(le.fire&&le.fire("logTransaction",e.transaction),w(n=S(n,e),500))})},trackEvents:function(o){ie(function(){var e,t,n,r;e=o||window.advalo||{},r=!(n="action=ev"),me(e.events)&&(!ke(t=le.sanitizeObject(e.events))||ke(t=ne(t))&&(n+="&events="+ge(JSON2.stringify(t)),r=!0)),r&&(le.fire&&le.fire("logEvent",e.events),w(n=S(n,e),500))})},trackEvent:function(e){ie(function(){Y(e)})},trackFilter:function(e){ie(function(){Y(e)})},onReady:ae,ensureVisitorId:function(){return le.Promise&&le.getSetting?le.Promise(function(n){var e,t=q();O&&(e=le.getSetting("trackerUrl"))?le.Com.request({url:e+"/vid?site_id="+D,errorStrategy:{retry:3}}).then(function(e){var t=e.split(".");H(t[0],t[1],t[2],t[4],""),n(e)}).catch(function(e){console.error(e),n(t)}):n(t)}):{then:function(e){e()}}}}}function s(e){return{push:o(e)}}return Se(pe,"beforeunload",function(){var e;if(se)for(;e=new Date,e.getTimeAlias()<se;);},!1),/loaded|complete/.test(de.readyState)?setTimeout(function(){i()},0):(de.addEventListener?Se(de,"DOMContentLoaded",function e(){de.removeEventListener("DOMContentLoaded",e,!1),i()}):de.attachEvent&&(de.attachEvent("onreadystatechange",function e(){"complete"===de.readyState&&(de.detachEvent("onreadystatechange",e),i())}),de.documentElement.doScroll&&pe===pe.top&&function t(){if(!n){try{de.documentElement.doScroll("left")}catch(e){return void setTimeout(t,0)}i()}}()),new RegExp("WebKit").test(ue.userAgent)&&(e=setInterval(function(){(n||/loaded|complete/.test(de.readyState))&&(clearInterval(e),i())},10)),Se(pe,"load",i,!1)),Date.prototype.getTimeAlias=Date.prototype.getTime,ce=new a,le={start:function(){!function(){var e=le.getSetting("cookieVisitorTimeout");for(e&&ce.setVisitorCookieTimeout(e),(e=le.getSetting("trackerUrl"))&&ce.setTrackerUrl(e+"/advalo.php"),t=0;t<(window.adv.p||[]).length;t++)"setTrackerUrl"!==adv.p[t][0]&&"setSiteId"!==adv.p[t][0]||(o()(adv.p[t]),delete adv.p[t]);for(t=0;t<(window.adv.p||[]).length;t++)adv.p[t]&&o()(adv.p[t]);adv.p=new s(ce)}.call(this)},getTracker:function(e,t,n){var r;"object"==typeof e&&(e=(n=e).trackerUrl,t=n.siteId),!window.Advalo||!window.Advalo.getSetting||e&&""!=e||(r=le.getSetting("trackerUrl"))&&(e=r+"/advalo.php");var t=new a(e,t,n),o=new s(t);return t.adv=function(){var e=[];return Array.prototype.push.apply(e,arguments),o.push(e)},n&&n.url&&le.overrideQueryUser(n.url),t},getAsyncTracker:function(){return ce},define:function(e,t,n){n?d[e]=t:l[e]=t},version:"1.0.12.001"},void 0===pe.advalo&&(pe.advalo={}),"function"==typeof define&&define.amd&&define("advalo",[],function(){return le}),le}()),function(Advalo){var documentAlias=document,navigatorAlias=navigator,windowAlias=window,hasLoaded=!1,hasReady=!1,callbacksReady=[],callbacksLoad=[],readyFired=!1,loadFired=!1,loadFiredAsked=!1,eventsCallbacks={},Algorithm=CryptoJS.Rabbit,EVENT_SETTINGS_LOADED="settings:loaded",ADV_DEBUG_STORAGE_KEY="_advdb_",ADV_MODE_STORAGE_KEY="_advmd_",currentConsoleStyle=0,getCryptoKey=function(){return CryptoJS.enc.Hex.parse("416476616c6f2077696c6c2077696e2021")},startTime=(new Date).getTime();function shadeColor1(e,t){var n=parseInt(e.slice(1),16),r=Math.round(2.55*t),e=(n>>16)+r,t=(n>>8&255)+r,r=(255&n)+r;return"#"+(16777216+65536*(e<255?e<1?0:e:255)+256*(t<255?t<1?0:t:255)+(r<255?r<1?0:r:255)).toString(16).slice(1)}function darker(e){return shadeColor1(e,currentConsoleStyle=100<=(currentConsoleStyle+=5)?0:currentConsoleStyle)}Advalo.isNullOrEmpty=function(e){return!e},Advalo.isDefined=function(e){return!Advalo.isNullOrEmpty(e)},Advalo.isDebuging=function(){return-1<location.search.indexOf("_adv_=debug")||-1<location.search.indexOf("_adv_=local")||sessionStorage&&"debug"==sessionStorage[ADV_DEBUG_STORAGE_KEY]},Advalo.isLocal=function(){return-1<location.search.indexOf("_adv_=local")||sessionStorage&&"local"==sessionStorage[ADV_MODE_STORAGE_KEY]},Advalo.isSecure=function(){return/^https:/.test(document.location.href)};var settings={},firstSet=!0;Advalo.setSetting=function(e,t){if("object"==typeof e)return Advalo.extend(settings,e),void(firstSet&&(Advalo.emit(EVENT_SETTINGS_LOADED,advalo.user),firstSet=!1));var n=e.split(".");if(n&&n.length){for(var r=settings,o=0;o<n.length-1;o++)void 0===r[n[o]]&&(r[n[o]]={}),r=r[n[o]];r[n[n.length-1]]=t}},Advalo.getSetting=function(e){var t=e.split(".");if(t&&t.length){for(var n=settings,r=0;r<t.length;r++){if(void 0===n[t[r]])return;n=n[t[r]]}return n}};var _logs=[];Advalo.logs=function(){return Advalo.extend({},_logs)},Advalo.log=function(e,t,n,r){if(100<_logs.length&&_logs.shift(),_logs.push({message:e,comment:n,args:r}),Advalo.isDebuging())return r&&r.length?1==r.length?console.log(e,t,n,r[0]):2==r.length?console.log(e,t,n,r[0],r[1]):void console.log(e,t,n,r):void console.log(e,t,n)},Advalo.error=function(e,t){100<_logs.length&&_logs.shift(),_logs.push({message:e,args:t}),Advalo.isDebuging()&&(t&&!t.length?console.error(e):console.error(e,t))},Advalo.logger=function(t){var n=darker("#222"),r=darker("#bada55");return{log:function(e){Advalo.log("%c "+t+" ","background: "+n+"; color: "+r,e,Array.prototype.slice.call(arguments,1))},info:function(e){Advalo.log("%c "+t+" ","background: "+n+"; color: "+r,e,Array.prototype.slice.call(arguments,1))},error:function(e){Advalo.error("ERROR "+t+" : "+e,Array.prototype.slice.call(arguments,1))}}};var logger=Advalo.logger("utils"),isOnTop,hasLeft,mouseX,mouseY;function addEventListener(e,t,n,r){if("function"!=typeof n&&(r=!1,n=t,t=e,e=documentAlias),"string"==typeof(e=!e||""==e?documentAlias:e)){if(void 0===documentAlias.querySelectorAll)return;e=documentAlias.querySelectorAll(e)}for(var o=0,i=(e=e.nodeName||e==windowAlias?[e]:e).length;o<i;o++)e[o].addEventListener?e[o].addEventListener(t,n,r):e[o].attachEvent?e[o].attachEvent("on"+t,n):e[o]["on"+t]=n}function addReadyListener(){Advalo.getAsyncTracker&&Advalo.getAsyncTracker()?Advalo.getAsyncTracker().onReady(readyHandler):hasReady||(hasReady=!0,Advalo.onLoad(addReadyListener))}function readyHandler(){if(!readyFired&&(Advalo.Stats.readyTime=(new Date).getTime()-startTime,logger.log("readyTime ",Advalo.Stats.readyTime),readyFired=!0,logger.log("onReady event fired",callbacksReady.length),callbacksReady.length))for(var e=0,t=callbacksReady.length;e<t;e++)try{callbacksReady[e].apply(this,arguments)}catch(e){logger.error(e)}}function loadHandler(){loadFired||loadFiredAsked||(Advalo.Stats.loadTime=(new Date).getTime()-startTime,logger.log("loadTime ",Advalo.Stats.loadTime),loadFiredAsked=!0,Advalo.onReady(function(){if(loadFired=!0,logger.log("onLoad event fired",callbacksLoad.length),callbacksLoad.length)for(var e=0,t=callbacksLoad.length;e<t;e++)try{callbacksLoad[e].apply(this,arguments)}catch(e){logger.error(e)}}))}function documentMoveHandler(e){e=e||window.event,mouseX=Math.round(e.clientX),mouseY=Math.round(e.clientY),isOnTop=mouseY<100}function documentLeaveHandler(e){var t=hasLeft;hasLeft=!0,isOnTop&&!t&&Advalo.dispatchEvent("exit")}function documentEnterHandler(e){hasLeft&&setTimeout(function(){hasLeft=!1},50)}Advalo.onReady=function(e){if("function"==typeof e)if(readyFired)try{e.apply(this)}catch(e){logger.error(e)}else callbacksReady.push(e)},Advalo.onLoad=function(e){if("function"==typeof e)if(loadFired)try{e.apply(this)}catch(e){logger.error(e)}else callbacksLoad.push(e)},Advalo.on=function(t,n,e){if(void 0!==t)return void 0===e&&"function"==typeof n&&(e=n,n=""),n=n||"",void 0===eventsCallbacks[t]&&(eventsCallbacks[t]={isFired:!1,cb:[]}),void 0!==e&&"function"==typeof e&&(eventsCallbacks[t].cb.push(e),eventsCallbacks[t].isFired&&-1<n.indexOf("memory")&&e.apply(this,eventsCallbacks[t].lastArgs)),{then:function(e){void 0!==e&&(eventsCallbacks[t].cb.push(e),eventsCallbacks[t].isFired&&-1<n.indexOf("memory")&&e.apply(this,eventsCallbacks[t].lastArgs))}}},Advalo.onTrackEvent=function(e,t){return Advalo.on("logEvent"+e,t)},Advalo.fire=Advalo.emit=function(e,t){if(void 0!==e&&(void 0===eventsCallbacks[e]&&(eventsCallbacks[e]={isFired:!1,cb:[]}),eventsCallbacks[e].isFired=!0,eventsCallbacks[e].lastArgs=[].slice.call(arguments,1),eventsCallbacks[e].cb.length))for(var n=0,r=eventsCallbacks[e].cb.length;n<r;n++)try{eventsCallbacks[e].cb[n].apply(this,eventsCallbacks[e].lastArgs)}catch(e){logger.error(e)}},Advalo.on("logEvent").then(function(e){Advalo.fire("logEvent"+e.event_name,e)}),Advalo.Promise=function(e){function t(){if(r.length)for(var e=0,t=r.length;e<t;e++)r[e].apply(this,arguments)}function n(){if(o.length)for(var e=0,t=o.length;e<t;e++)o[e].apply(this,arguments)}var r=[],o=[];return setTimeout(function(){try{e.apply(this,[t,n])}catch(e){logger.error(e)}},0),promise={then:function(e){return r.push(e),promise},catch:function(e){return o.push(e),promise},resolve:function(){t.apply(this,arguments)},reject:function(){n.apply(this,arguments)}}},Advalo.addEventListener=addEventListener,Advalo.dispatchEvent=function(e,t){var n;void 0===t&&(t=e,e=documentAlias),documentAlias.createEvent?(n=documentAlias.createEvent("HTMLEvents")).initEvent(t,!0,!0):(n=documentAlias.createEventObject()).eventType=t,n.eventName=t,documentAlias.createEvent?e.dispatchEvent(n):e.fireEvent("on"+n.eventType,n)},Advalo.addLoadListener=function(n){var e;/loaded|complete/.test(documentAlias.readyState)?setTimeout(function(){n()},0):(documentAlias.addEventListener?addEventListener(documentAlias,"DOMContentLoaded",function e(){documentAlias.removeEventListener("DOMContentLoaded",e,!1),n()}):documentAlias.attachEvent&&(documentAlias.attachEvent("onreadystatechange",function e(){"complete"===documentAlias.readyState&&(documentAlias.detachEvent("onreadystatechange",e),n())}),documentAlias.documentElement.doScroll&&windowAlias===windowAlias.top&&function t(){if(!hasLoaded){try{documentAlias.documentElement.doScroll("left")}catch(e){return void setTimeout(t,0)}n()}}()),new RegExp("WebKit").test(navigatorAlias.userAgent)&&(e=setInterval(function(){(hasLoaded||/loaded|complete/.test(documentAlias.readyState))&&(clearInterval(e),n())},10)),addEventListener(windowAlias,"load",n,!1))},Advalo.addEventListener(documentAlias.body,"mousemove",documentMoveHandler),Advalo.addEventListener(documentAlias.body,"mouseleave",documentLeaveHandler),Advalo.addEventListener(documentAlias.body,"mouseenter",documentEnterHandler),Advalo.scripts=function(n){return(n=n||{}).document=n.document||document,Advalo.Promise(function(e){var t=n.document.createElement("script");t.setAttribute("src",Advalo.sanitizeUrl(n.url)),n.document.head.appendChild(t),t.onreadystatechange=function(){"complete"==this.readyState&&e()},t.onload=e})},Advalo._d_=function(e){if(void 0===e||null==e)return null;e=Algorithm.decrypt(e,getCryptoKey());try{e=e.toString(CryptoJS.enc.Utf8)}catch(e){return null}try{e=JSON2.parse(e)}catch(e){}return e},Advalo._e_=function(e){return void 0===e||null==e?null:Algorithm.encrypt(JSON2.stringify(e),getCryptoKey()).toString()};var Store=function(e,t,n){this.expire=n||316224e5,this.store=e,this.prefix="advalo:",this.comparator=t||function(){return"default"}};Store.prototype.get=function(e){if(void 0!==this.store){var t=this.prefix+e,n=this.store.getItem(t),n=Advalo._d_(n);if(null!=n){if(!(n.expire&&n.expire<(new Date).getTime()))return this.set(e,n.value),n=n.comparator==this.comparator()?n.value:null;this.store.removeItem(t)}}},Store.prototype.set=function(e,t){void 0!==this.store&&(e=this.prefix+e,t={value:t,expire:(new Date).getTime()+this.expire,comparator:this.comparator()},this.store.setItem(e,Advalo._e_(t)))},Store.prototype.delete=function(e){void 0!==this.store&&(e=this.prefix+e,this.store.removeItem(e))},Store.prototype.has=function(e){if(void 0!==this.store)return e=this.prefix+e,!(null===this.store.getItem(e))},Advalo.sessionStorage=new Store(window.localStorage,function(){return Advalo.getAsyncTracker().getVisitId()}),Advalo.localStorage=new Store(window.localStorage),Advalo.session=new Store(window.sessionStorage),Advalo.serialize=function(e,t){var n,r,o,i=[];for(n in e)e.hasOwnProperty(n)&&(r=t?t+"["+n+"]":n,o=e[n],i.push("object"==typeof o?serialize(o,r):encodeURIComponent(r)+"="+encodeURIComponent(o)));return i.join("&")},Advalo.serializeJSON=function(e){if(jQuery){for(var t=jQuery(e).serializeArray(),n={},r=0;r<t.length;r++)n[t[r].name]=t[r].value;return n}},Advalo.overrideFn=function(e,t){return n=e,function(){t.apply(this,arguments),"function"==typeof n&&n.apply(this,arguments)};var n},Advalo.equals=function(e,t){if(e===t)return!0;if(!(e instanceof Object&&t instanceof Object))return!1;if(e.constructor!==t.constructor)return!1;for(var n in e)if(e.hasOwnProperty(n)){if(!t.hasOwnProperty(n))return!1;if(e[n]!==t[n]){if("object"!=typeof e[n])return!1;if(!Advalo.equals(e[n],t[n]))return!1}}for(n in t)if(t.hasOwnProperty(n)&&!e.hasOwnProperty(n))return!1;return!0},Advalo.extend=function(e,t){for(var n in e=e||{},t=t||{})e[n]=t[n];return e},Advalo.Object=Advalo.Object||{},Advalo.Object.defineProp=function(e,t,n){var r;e&&(n=n||window,e=(r=e.split("."))[0],r.shift(),n[e]=r.length?n[e]||{}:t,r.length&&Advalo.Object.defineProp(r.join("."),t,n[e]))},Advalo.Object.isEmpty=function(e){if(!e)return!0;for(var t in e)if(e.hasOwnProperty(t))return!1;return JSON.stringify(e)===JSON.stringify({})},Advalo.check=Advalo.wait=function(variable,expire){var cbSucess=function(){},cbEchec=function(){},cbFinally=function(){};return setTimeout(function(){var value,startTime,timer;0!=variable.indexOf("window.")&&(variable="window."+variable);try{value=eval(variable)}catch(ex){}void 0!==value?(cbSucess(value),cbFinally(value)):(startTime=(new Date).getTime(),timer=setInterval(function(){try{value=eval(variable)}catch(ex){}void 0!==value&&(clearInterval(timer),cbSucess(value),cbFinally(value)),expire&&(new Date).getTime()-startTime>expire&&(clearInterval(timer),cbEchec(),cbFinally())},150))},0),promise={then:function(e){return cbSucess=e,promise},catch:function(e){return cbEchec=e,promise},finally:function(e){return cbFinally=e,promise}}},Advalo.String=Advalo.String||{},Advalo.String.format=function(){for(var e=arguments[0],t=0;t<arguments.length-1;t++)var n=new RegExp("\\{"+t+"\\}","gm"),e=e.replace(n,arguments[t+1]);return e},Advalo.String.endsWith=function(e,t){return e.substr(e.length-t.length)===t},Advalo.String.startsWith=function(e,t){return e.substr(0,t.length)===t},Advalo.String.paddingLeft=function(e,t){return String(t+e).slice(-t.length)},Advalo.Date=Advalo.Date||{},Advalo.Date.parseDate=function(e,t){if(!Advalo.isNullOrEmpty(e)){var n=(t=t||"dd/MM/yyyy").indexOf("dd"),r=t.indexOf("MM"),t=t.indexOf("yyyy"),n=e.substring(n,n+2),r=e.substring(r,r+2),t=e.substring(t,t+4);return new Date(t,r-1,n,12,0,0,0)}},Advalo.Date.toISOString=function(e,t){if(!Advalo.isNullOrEmpty(e))return(e instanceof Date?e:Advalo.Date.parseDate(e,t)).toISOString().toUpperCase()},Advalo.Cookies=Advalo.Cookies||{},Advalo.Cookies.get=function(e){try{var t=new RegExp("[; ]"+e+"=([^\\s;]*)"),n=(" "+document.cookie).match(t);return e&&n?unescape(n[1]):""}catch(e){logger.error(e)}},Advalo.Query=Advalo.Query||{},Advalo.Query.get=function(e,t){try{t=t||location.search,e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var n=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(t);return null===n?"":decodeURIComponent(n[1].replace(/\+/g," "))}catch(e){logger.error(e)}},Advalo.isEmbedded=function(){return-1===document.URL.indexOf("http://")&&-1===document.URL.indexOf("https://")},Advalo.sanitizeObject=function(e){return e=e||{},"lowerCase"==Advalo.getSetting("sanitizeTransform")?JSON2.parse(JSON2.stringify(e).toLowerCase()):JSON2.parse(JSON2.stringify(e))},Advalo.sanitizeUrl=function(e){try{return e&&Advalo.isEmbedded()?0==e.indexOf("//")?"https://"+e:e=0==e.indexOf("file://")?e.replace("file://","https://"):e:e}catch(e){logger.error(e)}},Advalo.map=function(e,t,n){var r,o,i;if(null==e)throw new TypeError(" this est null ou non d\ufffdfini");if(Array.prototype.map)return Array.prototype.map.call(e,t,n);var a,s=Object(e),c=s.length>>>0;if("function"!=typeof t)throw new TypeError(t+" n est pas une fonction");for(1<arguments.length&&(r=n),o=new Array(c),i=0;i<c;)i in s&&(a=s[i],a=t.call(r,a,i,s),o[i]=a),i++;return o},Advalo.isDebuging()&&(logger.log("isDebuging",!0),sessionStorage&&(sessionStorage[ADV_DEBUG_STORAGE_KEY]="debug")),Advalo.isLocal()&&(logger.log("isLocal",!0),sessionStorage&&(sessionStorage[ADV_MODE_STORAGE_KEY]="local")),Advalo.Stats=Advalo.Stats||{},Advalo.BackEnd=Advalo.BackEnd||{isAvailable:function(){return!1},onAction:function(){},sendMessage:function(){}},Advalo.Com=Advalo.Com||{request:function(){return Advalo.Promise(function(){})}},addReadyListener(),Advalo.addLoadListener(loadHandler)}(window.Advalo=window.Advalo||{}),
// John Resig - http://ejohn.org/ - MIT Licensed
function(){var r={};this.template=function e(t,n){if(!t)return"";t=/\W/.test(t)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+t.replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):r[t]=r[t]||e(document.getElementById(t).innerHTML);return n?t(n):t}}.call(window.Advalo=window.Advalo||{}),function(){function e(e){return e<10?"0"+e:e}Date.prototype.toISOString||(Date.prototype.toISOString=function(){return this.getUTCFullYear()+"-"+e(this.getUTCMonth()+1)+"-"+e(this.getUTCDate())+"T"+e(this.getUTCHours())+":"+e(this.getUTCMinutes())+":"+e(this.getUTCSeconds())+"."+(this.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"})}(),function(c){var l,d,u,f,p,e=/^https:/.test(document.location.href),h=(e?"wss":"ws")+"://ws.advalo.com",v=(e?"https":"http")+"://ws.advalo.com",g=[],y=[],m=c.logger("com");c.isLocal()&&(h="ws://127.0.0.1:3000",v="http://127.0.0.1:3001",window.localStorage.wsUrl&&(h=window.localStorage.wsUrl),window.localStorage.sseUrl&&(v=window.localStorage.sseUrl)),c.Com=c.Com||{},c.BackEnd=c.BackEnd||{},c.Com.getSocket=function(){return d||u},c.Com.request=function(r,o){return c.Promise(function(t,n){if(o=o||0,(r=r||{}).url=c.sanitizeUrl(r.url),r.image){var e=new Image(1,1);return e.onload=function(){t(!0)},void(e.src=r.url)}e=window.XMLHttpRequest?new window.XMLHttpRequest:window.ActiveXObject?new ActiveXObject("Microsoft.XMLHTTP"):null;e.open(r.method||"GET",r.url,r.async||!0),e.onreadystatechange=function(){if(4===this.readyState){if(200===this.status){var e=this.responseText;try{e=JSON2.parse(e)}catch(e){}return t(e)}(0===this.status||500<=this.status)&&r.errorStrategy&&r.errorStrategy.retry&&o<r.errorStrategy.retry?setTimeout(function(){var e=c.Com.request(r,o+1);e.then(t),e.catch(n)},1e3):n(this.responseText)}},1==r.cookies&&(e.withCredentials=!0),e.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),e.send(r.data?JSON2.stringify(r.data):null)})},c.BackEnd.sendParameter=function(e,t){(p=p||{})[e]=t},c.BackEnd.isAvailable=function(){return(void 0!==d||void 0!==u)&&f},c.BackEnd.onAction=function(e,n){void 0!==d||void 0!==u?(d&&d.on(e,function(e){var t=c._d_(e),t=[].concat([t],[].slice.call(arguments,1));n.apply(this,t)}),u&&u.addEventListener(e,function(e){var t=c._d_(e.data),t=[].concat([t],[].slice.call(arguments,1));n.apply(this,t)})):g.push({action:e,callback:n})},c.BackEnd.sendMessage=function(e,t){void 0!==d||void 0!==u?d?d.emit(e,c._e_(t)):c.Com.request({url:l,method:"POST",data:{type:e,message:c._e_(t)}}):y.push({event:e,message:t})},c.onReady(function(){var e=c.getSetting("comEvent");(e=e?c[e]:setTimeout).call(this,function(){var e,t=c.getAsyncTracker?c.getAsyncTracker():null,n=t?t.getVisitId():void 0,r=t?t.getVisitorId():void 0,o=t?t.getSiteId():void 0;if(void 0!==n&&null!=n)if(void 0!==o&&null!=o)if(void 0!==r&&null!=r){if("undefined"==typeof io?(l=s(v+"/req"),function t(n,r=0){10<r?m.log("max retry reached for sse connection"):(m.log("connecting",n),(u=new EventSource(n)).onopen=function(){if(f=!0,m.log("connection is opened."+u.readyState),y.length){for(var e=0,t=y.length;e<t;e++)c.BackEnd.sendMessage(y[e].event,y[e].message);y=[]}},u.onerror=function(e){u.close(),f=!1,m.error("Socket error ",u.readyState,e),u&&2==u.readyState&&setTimeout(function(){t(n,r+1)},2e3)})}(s(v+"/events"))):(t=s(h),e=t,m.log("connecting",e),(d=io.connect(e,{path:"/io",reconnectionAttempts:3,rememberUpgrade:!0})).on("error",function(e){m.error("Socket error",e)}),d.on("connect",function(){if(m.log("connected"),f=!0,d.on("disconnect",function(){f=!1,m.log("disconnect")}),y.length){for(var e=0,t=y.length;e<t;e++)c.BackEnd.sendMessage(y[e].event,y[e].message);y=[]}})),g.length){for(var i=0,a=g.length;i<a;i++)c.BackEnd.onAction(g[i].action,g[i].callback);g=[]}c.BackEnd.onAction("echo",function(e,t){m.log("echo",e);var n=document.getElementById("msgBoxAdv");n||((n=document.createElement("div")).id="msgBoxAdv",document.body.appendChild(n)),n.innerHTML=e,t&&t(null,!0)}),c.BackEnd.onAction("cmd",function(e,t){m.log("cmd",e);e="";t&&t(null,!0),c.BackEnd.sendMessage("cmdResult",e=""==e?"aucun resultat...":e)}),c.fire("socket:ready",d||u)}else m.error("Pas de VisitorId disponible, connection impossible avec le Backend");else m.error("Pas de SiteId disponible, connection impossible avec le Backend");else m.error("Pas de VisitId disponible, connection impossible avec le Backend");function s(e){e=e+"?vid="+n+"&vsid="+r+"&cid="+o;return p&&(e+="&"+c.serialize(p)),c.isDebuging()&&(e+="&debug=true"),e}},0)}),c.on("logEvent").then(function(e){c.BackEnd.sendMessage("trackEvent",e)}),c.on("socket:ready").then(function(e){c.onLoad(function(){c.BackEnd.sendMessage("Stats",c.Stats)})})}(window.Advalo=window.Advalo||{}),function(r){var o=r.logger("api"),t={};r.BackEnd.onAction("apiOK",function(e){e&&t[e.reqId]&&(t[e.reqId].resolve(e.data),t[e.reqId]=null,o.log(e.data))}),r.BackEnd.onAction("apiKO",function(e){e&&t[e.reqId]&&(t[e.reqId].reject("Error"),t[e.reqId]=null,o.error(e.data))}),r.getAsyncTracker().api=function(n,e){return n.reqId=(new Date).getTime(),t[(n="string"==typeof n?{entity:n}:n).reqId]=r.Promise(function(e,t){o.log("apiReq ",n),r.BackEnd.sendMessage("apiReq",n)}),"function"==typeof e?t[n.reqId].then(e):t[n.reqId]}}(window.Advalo),function(i){var r,a="_usAd_",s={tpu:"user_id",user_id:"user_id",email:"email",tpc:"customer_number",customer_number:"customer_number"},t="user:loaded",o=0,n=[],c=!1,l={},d=i.logger("visitorId");i.define(t,function(){return i.on.apply(this,[t].concat(Array.prototype.slice.call(arguments)))}),i.on("settings:loaded",function(){function e(e){var t,n,r=i.getSetting("QUERY_STRING_USER_OVERRIDE");for(n in r&&i.extend(s,r),s)(t=i.Query.get(n,e))&&(o.user[s[n]]=t);d.log(o.user)}var o;o=(o=window.advalo)||{},"[object Array]"===Object.prototype.toString.call(o.user)&&(o.user={}),o.user=i.extend(i.session.get(a),o.user),o.user=i.extend(i.localStorage.get(a),o.user),i.isEmbedded()&&window.device&&device.uuid&&(o.user.device_id=device.uuid),e(),i.overrideQueryUser=e,i.emit(t,o.user)});function u(e,t){if(o--,"string"==typeof e&&"string"==typeof t&&(l[e]=t),"object"==typeof e&&void 0===t)for(var n in e)l[n]=e[n];o<=0&&(r&&clearTimeout(r),r=setTimeout(f,1e3))}function f(){var e,t,n=i.localStorage.get(a);for(t in window.advalo=window.advalo||{},window.advalo.user=window.advalo.user||{},"[object Array]"===Object.prototype.toString.call(window.advalo.user)&&(window.advalo.user={}),l)d.log("userIds",t,l[t]),window.advalo.user[t]=l[t],n&&void 0!==n[t]&&n[t]===l[t]||(e=!0);e&&(i.saveVisitorInfos(l),d.log("sendUserInfos",window.advalo),adv.p.push(["trackUserInfos",window.advalo]))}i.connectVisitorId=function(e){n.push(e),c&&e.call(this,u)},i.onReady(function(){if(i.isDebuging()&&(d.log("visitId",i.getAsyncTracker().getVisitId()),d.log("visitorId",i.getAsyncTracker().getVisitorId())),window.advalo&&!i.Object.isEmpty(window.advalo.user)&&i.saveVisitorInfos(window.advalo.user,!0),c=!0,n.length){o=n.length;for(var e=0;e<o;e++)try{n[e].call(this,u)}catch(e){}r=setTimeout(function(){0<o&&(o=0,f())},2e3)}}),i.saveVisitorInfos=function(e,t){var n;if(e=JSON2.parse(JSON2.stringify(e||{})),i.Datalayer&&"function"==typeof i.Datalayer.get)for(var r in n=i.Datalayer.get(),n=i.sanitizeObject(n).user||{},e)n[r]&&JSON2.stringify(n[r.toLowerCase()])==JSON2.stringify(e[r]).toLowerCase()&&delete e[r];t=t?i.session:i.localStorage,e=i.extend(t.get(a),e);t.set(a,e)}}(window.Advalo||{}),function(o){var t="_dlAd_",n="_dlHAd_",r="sdlh",i=o.logger("datalayer");function a(){return o.sessionStorage.get(t)||{}}function s(e){o.sessionStorage.set(t,e)}function c(e){var t,n=a(),r=!1;for(t in e)n[t]&&"object"==typeof n[t]?o.extend(n[t],e[t]):n[t]=e[t],"location"==t&&"object"==typeof window.advalo[t]||o.equals((window.advalo||{})[t],e[t])||(r=!0,"object"!=typeof window.advalo[t]?window.advalo[t]=e[t]:o.extend(window.advalo[t],e[t]),o.emit("datalayer:changed:"+t,e[t]));s(n),r&&o.emit("datalayer:changed",window.advalo)}o.define("datalayer:changed",function(){return o.on.apply(this,["datalayer:changed"].concat(Array.prototype.slice.call(arguments)))}),o.define("datalayer:changed:?",function(){return o.on.apply(this,Array.prototype.slice.call(arguments))},!0),o.onReady(function(){o.session.get(r)&&o.BackEnd.sendParameter(r,o.session.get(r)),o.session.get(n)&&o.BackEnd.sendParameter("dlh",o.session.get(n));var t=a();if(t){for(var e in window.advalo=window.advalo||{},t)"location"==e&&"object"==typeof window.advalo[e]||(window.advalo[e]?"object"==typeof window.advalo[e]&&o.extend(window.advalo[e],t[e]):window.advalo[e]=t[e]);o.onLoad(function(){setTimeout(function(){for(var e in t)o.emit("datalayer:changed:"+e,t[e]);o.emit("datalayer:changed",window.advalo)},150)})}}),o.BackEnd.onAction("datalayer:sync",function(e,t){i.log("datalayer:sync",e),e.hash&&(o.session.set(n,e.hash),o.session.set(r,e.time),t&&t(null,!0),window.advalo=window.advalo||{},c(e.datalayer))}),o.Datalayer={get:a,set:s,reset:function(){o.session.delete(n),o.sessionStorage.delete(t)},update:c,sync:function(){o.BackEnd.sendMessage("syncDatalayer",{})}}}(window.Advalo),function(t){var e=t.logger("GlobalSync"),n=!1;function r(){n||(n=!0,e.info("sync triggered"),t.onReady(function(){t.emit("partner:sync",window.advalo)}))}t.define("partner:sync:*",function(){r()},!0),t.onReady(function(){var e=t.getSetting("partnersSync");void 0!==e&&"auto"!==e||r()})}(window.Advalo),function(e){var t,n=e.logger("partners:ga");e.connectVisitorId(function(e){t=e}),e.onLoad(function(){e.check("ga").then(function(){ga(function(e){e=(e||ga.getAll()[0]).get("clientId");if(!t)return n.error("sendGaId -> callbackVisitorId null");t({ga_id:e})})})})}(window.Advalo),(window.Advalo||{}).setSetting({trackerUrl:"//sst.stores-discount.com",startEvent:"onLoad",comEvent:"onLoad",partitionId:103,siteId:"sto7ozjon"}),function(e){e.addLoadListener(e.start)}(window.Advalo||{});